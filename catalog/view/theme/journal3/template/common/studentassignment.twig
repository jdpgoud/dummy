<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

<link rel="stylesheet" href="custom.css">
<div class="app-wrapper">
    <div class="student-courses-wrap">
        <!-- Breadcrumb  -->
		
        <ul class="breadcrumb">
            <li><a href="#" id="bred1">{{ first_topic_session_videos.product[0].name }}</a></li>
            {# <li><a href="#" id="bred2"></a></li>
            <li><a href="#" id="bred3"></a></li>
            <li></li> #}
        </ul>
        <!-- Breadcrumb  -->

        <div class="courses-wrap">

            <!-- Filters  -->
            <div class="left-pane">
		

      <div id="treeview-checkbox-demo">
            <ul>
			{% for topic in topics %}

			 <a href="#" onclick="sessionTopicsshowhide({{ topic.topic_id }})"><li class="fa fa-plus-square">{{ topic.title }} </li></a>
                <ul>
				{% for session in topic.sessions %}
                    <li><a href="#" onclick="SessionTopic({{ session.session_id }}, '{{ topic.title }}', '{{ session.title }}');">{{ session.title }}</a></li>                                           
                {% endfor %}
                 </ul>
               
				{% endfor %}
			</ul>
        </div>
            </div>

            <!-- Filter ends  -->

            <!-- Content Block  -->

            <div class="right-pane">
                
                        <h2>{{ first_topic_session_videos.product[0].name }}</h2>
                        
                <!--<h2>Mathematics</h2>-->

                <div class="student-syllabus-status">
                    <div class="status for-syllabus">
                        <p>Syllabus Completed</p>
                        <div class="progressbar">
                            <span class="w-100"></span>
                        </div>
                        <p class="status-out">100%</p>
                    </div>
                    <div class="status for-assignments">
                        <p>Assessment Marks</p>
                        <div class="progressbar">
                            <span class="w-75"></span>
                        </div>
                        <p class="status-out">120/800</p>
                    </div>

                </div>

                <div class="student-content">
                    <ul class="tabs">
                        <li>
                            <input type="radio" checked name="tabs" id="tab1" onlclick="classTab({{ session.session_id }});">
                            <label for="tab1" >Classes</label>
								
                            <div id="tab-content1" class="tab-content animated fadeIn">
                                <!-- <h2>Classes</h2> -->
                                {% for session_video in first_topic_session_videos.sessionvideosresult %}
                                    {% if loop.first %}
                                        <div class="classes-list"> {# open row #}
                                    {% endif %}
                                    <div class="class-info">
                                        <img src="image/catalog/class-img.png">
                                        <div class="class-desc">
                                            <h4>{{session_video.video}}</h4>
                                            <p>Class: X | CBSE<span>Guru: Lakshmi Narayana Sir</span></p>
                                        </div>
                                    </div>
                                    {% if loop.index % 4 == 0 %}
                                        </div><div class="classes-list"> {# after 4 iterates close row and open new #}
                                    {% endif %}                
                                    {% if loop.last %}
                                        </div> {# close last row #}
                                    {% endif %}
                                {% endfor %}
								
                            </div>
								
                        </li>
                        <li>
                            <input type="radio" name="tabs" id="tab2" onclick="testquestion({{ SessionVideosresult.topicsessions[0].test_id }});">
                            <label for="tab2">Test</label>
                            <div id="tab-content2" class="tab-content animated fadeIn">
                                <h2>Test</h2>
                            </div>
                        </li>
                        <li>
                            <input type="radio" name="tabs" id="tab3" onclick="assignmentList({{ SessionVideosresult.topicsessions[0].test_id }});">
                            <label for="tab3">Assignments</label>

                            <div id="tab-content3" class="tab-content animated fadeIn">
                                <h2>Home Assignment</h2>
                            </div>
                        </li>
                    </ul>
                    <br>
                    <div style="clear:both"></div>

                </div>

            </div>

        </div>



    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
function SessionTopic(session_id, topic, session){
	//var session_id;
	var data = 'session_id='+ session_id; 
	$.ajax({
      url: 'index.php?route=common/studentassignment/getVideosbysessions',
	  type:'post',
      dateType: 'json',
	  data:data,
      success: function (response) {
	    var html = "";
        $("#bred2").text(topic);
        $("#bred3").text(session);
        $("#tab-content1").html("");
        response.SessionVideo.forEach(function(value, index){
            if ((index % 4) == 0) html += '<div class="classes-list">';
                html += value.player
            /*html += '<div class="class-info">';
            html += '<img src="image/catalog/class-img.png">';
            html += '<div class="class-desc">';
            html += '<h4>'+value.video+'</h4>';
            html += '<p>Class: X | CBSE<span>Guru: Lakshmi Narayana Sir</span></p>';
            html += '</div>';
            html += '</div>';
            */

            if ((index % 4) == 2) html += '</div>';
        });
        html += '</div>';
        $("#tab-content1").append(html)
      }
    });
	}
	
	function testquestion(test_id){
	alert("");
	var data = 'test_id='+ test_id;
	 $.ajax({
      url: 'index.php?route=common/studentassignment/getListOfSessionTestQuestions',
	  type:'post',
      dateType: 'json',
	  data:data,
      success: function (response) {
	  var html;
	 alert(response);
	 var len = response.sessiontestquestions.length;
			 for(var i=0; i<len; i++){
			 var question_id=response.sessiontestquestions[i].question_id;
			 var question=response.sessiontestquestions[i].question;
			 html+="<p>"+ question +"</p>";
                $("#tab-content2").append(html);
			 }
		
      }
    });
	}
	
	function sessionTopicsshowhide(topic_id){
	var data = 'topic_id='+ topic_id;
	 $.ajax({
      url: 'index.php?route=common/studentassignment/getTopicsbyproduct',
	  type:'post',
      dateType: 'json',
	  data:data,
      success: function (response) {
	  var html;
	  alert(response);
      }
    });
	}


$('.two-toggle').click(function() {
  $(this).parent().children('ul.tree').toggle();
  $(this).parent().toggleClass('active');
});

$('.aside-list li').click(function(e) {
  e.stopPropagation();
  $(this).children('label').children('i').toggleClass('fa-plus-square fa-minus-square')
  $(this).children('label').children('i').toggleClass('fa-caret-up fa-caret-down')
});
</script>
